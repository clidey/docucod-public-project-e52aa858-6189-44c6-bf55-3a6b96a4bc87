---
title: "Troubleshooting Setup and Usage"
description: "Solutions to common setup pitfalls: module not found errors, build failures (like missing SQLite JSON1 support), datatype mismatches, and tips for verifying DB compatibility. Ensures users can quickly recover from issues blocking progress."
---

# Troubleshooting Setup and Usage

This guide helps you quickly identify and resolve common issues encountered during the setup and use of GORM Data Types. Whether you face module import errors, build problems such as missing SQLite JSON1 support, datatype mismatch errors, or database compatibility concerns, this document provides concrete solutions so you can get back on track swiftly.

---

## 1. Common Setup Errors and How to Fix Them

### 1.1 Module Not Found / Import Errors

**Issue:**
```plaintext
cannot find package "gorm.io/datatypes" or similar errors during Go build.
```

**Cause:**
- The `gorm.io/datatypes` module is not installed or the Go module cache is corrupted.

**Resolution:**
1. Ensure you have Go modules enabled (`GO111MODULE=on` or Go version ≥1.16).
2. Run:

   ```bash
go get -u gorm.io/datatypes
```

3. Verify with:

   ```bash
go mod tidy
```

4. Rebuild your project.

<Tip>
If the error persists, clear your Go module cache with `go clean -modcache` and retry.
</Tip>

---

### 1.2 Build Failures Related to SQLite JSON1 Extension

**Issue:**
```plaintext
undefined symbol: sqlite3_json...
```
or
```plaintext
build errors referencing missing json1 functions
```

**Cause:**
- SQLite driver is not built with the `json1` extension tag, which is required for JSON support.

**Resolution:**
1. Build your Go project with the `json1` build tag enabled:

   ```bash
go build --tags json1
```

2. Ensure your import for SQLite uses the driver with json1 support (commonly `github.com/mattn/go-sqlite3`).
3. Confirm your environment uses this tag on all relevant build/test runs.

<Note>
If you are running tests, use:
```bash
go test --tags json1 ./...
````

3. For CI/CD pipelines, explicitly set build flags.
</Note>

---

### 1.3 Unsupported MariaDB JSON Functionality

**Issue:**
Errors or failures when using JSON functions such as `CAST(? AS JSON)` on MariaDB.

**Cause:**
MariaDB lacks support for certain MySQL JSON casting features, causing incompatibility.

**Resolution:**
- Avoid JSON casting functions on MariaDB.
- Use plain JSON strings or adjust queries to account for MariaDB limits.
- If possible, migrate to a fully supported MySQL or PostgreSQL version for JSON features.

<Tip>
You can detect MariaDB from server version string and adjust your code accordingly.
</Tip>

---

### 1.4 Datatype Mismatches and Query Failures

**Issue:**
Queries fail or return no results due to datatype mismatches (e.g., comparing JSON columns, Date fields).

**Cause:**
- Query parameters may not use the correct datatypes (e.g., using `string` instead of `datatypes.Date`), or bindings don't match the DB column type.

**Resolution:**
- Use the dedicated types from the `datatypes` package (e.g., `datatypes.Date`, `datatypes.JSONQuery`) in query conditions.
- Example for Date:

```go
var result UserWithDate
DB.First(&result, "name = ? AND date = ?", "jinzhu", datatypes.Date(timeValue))
```

- For JSON queries, use the provided query helpers:

```go
DB.First(&user, datatypes.JSONQuery("attributes").HasKey("role"))
```

- Always use the type-safe constructors and comparison methods (e.g., `datatypes.NewUUIDv4()` for UUID fields).

---

### 1.5 Failed Migrations or Table Auto-Migrate Errors

**Issue:**
Migration fails or certain columns are not created as expected.

**Cause:**
- May occur if your GORM version is incompatible or lacks proper database driver support.
- SQLite time types get mapped to `TEXT` because SQLite lacks native time data types.

**Resolution:**
- Verify you are using compatible versions of GORM, database drivers, and `gorm.io/datatypes`.
- Use the explicit time constructor for `datatypes.Time` when needed.
- Accept SQLite’s behavior for time storage (TEXT) as a known limitation.

---

## 2. Verifying Database Compatibility

- Supported databases include MySQL, PostgreSQL, SQLite (with JSON1), and SQL Server.
- MariaDB has known JSON limitations.
- Use the following table for JSON data type compatibility:

| Database   | JSON Data Type Support | JSON Cast Support | Notes                   |
|------------|------------------------|-------------------|-------------------------|
| MySQL      | Yes                    | Yes               | MariaDB limited support |
| PostgreSQL | JSONB (recommended)     | Yes               | Full support            |
| SQLite     | Yes (json1 extension)  | No                | Requires build tag      |
| SQL Server | Limited (not detailed)  | N/A               | Check driver support    |

<Tip>
Run sample queries from the [Create & Query Data With Advanced Types guide](/getting-started/first-usage/first-examples) to verify your environment.
</Tip>

---

## 3. Troubleshooting Tips

### 3.1 Debugging Connection Issues

- Check your DSN/connection string for correctness.
- Ensure network/firewall rules allow communication.
- Use environment variables (`GORM_DSN`, `GORM_DIALECT`) to configure test setups.

### 3.2 Verifying Installation

- Implement a minimal test similar to the example below to verify your setup:

```go
package main

import (
	"time"

	"gorm.io/driver/sqlite"
	"gorm.io/datatypes"
	"gorm.io/gorm"
)

type UserWithDate struct {
	ID   uint
	Name string
	Date datatypes.Date
}

func main() {
	db, err := gorm.Open(sqlite.Open("test.db"), &gorm.Config{})
	if err != nil {
		panic(err)
	}

	db.AutoMigrate(&UserWithDate{})

	user := UserWithDate{Name: "jinzhu", Date: datatypes.Date(time.Now())}
	db.Create(&user)

	var result UserWithDate
	db.First(&result, "name = ? AND date = ?", "jinzhu", user.Date)
}
```

- If this succeeds, installation and migrations are correct.

### 3.3 Logging and Verbose Output

- Enable detailed logging on GORM’s DB connection to see generated SQL:

```go
db.Logger = db.Logger.LogMode(logger.Info)
```

- Useful for diagnosing query issues and datatype mismatches.

---

## 4. Useful Links and Resources

- [Install GORM Data Types](/getting-started/setup-basics/install-gorm-datatypes)
- [Verify Installation](/getting-started/setup-basics/verify-installation)
- [Create & Query Data With Advanced Types](/getting-started/first-usage/first-examples)
- [Prerequisites & System Requirements](/getting-started/setup-basics/prerequisites)
- [GORM Data Types GitHub Repository](https://github.com/go-gorm/datatypes)

---

## 5. When to Seek Help

If issues persist after trying all the above:

- Confirm that your Go environment and module setup are correct.
- Check that your database version meets the requirements.
- Search or open a new issue on the [GORM Data Types GitHub repo](https://github.com/go-gorm/datatypes/issues).
- Reach out on community forums or GORM support channels for guidance.


---

This troubleshooting guide ensures you can anticipate and resolve setup blockers efficiently, enabling you to harness the full capability of GORM Data Types with confidence.